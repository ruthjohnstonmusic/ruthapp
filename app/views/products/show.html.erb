<div class="container-fluid">
  <div class="row">
    <h1><%= @product.name %></h1>
  </div>
  <div class="row" data-product-id="<%= @product.id %>">
    <div class="col-sm-4">
      <%= image_tag(@product.image_url, class: "img-zoom", data_zoom_image:"@product.image_url") %>
    </div>
    <div class="col-sm-8 product_info">
      <p>
        <strong>Description:</strong>
        <%= @product.description %>
      </p>

      <!-- <p>
        <strong>Image url:</strong>
        <%= @product.image_url %>
      </p> -->

      <p>
        <strong>Price:</strong>
        Â£<%= @product.price %>
      </p>

      <p>
        Average Rating: <div class="rated" id="average-rating" data-score="<%= @product.average_rating %>"></div>
      </p>

      <div>
        <% if user_signed_in? %>
          <%= form_with(url: payments_create_path) do |form| %>
            <%= hidden_field_tag(:product_id, @product.id) %>
            <%= render partial: "shared/stripe_checkout_button", locals: {product: @product}%>
          <% end %>
        <% else %>
          Please <%= link_to 'sign in', new_user_session_path, class: "edit-link" %>
          or <%= link_to 'sign up', new_user_registration_path, class: "edit-link" %> to buy!
        <% end %>
      </div>
    </div>
  </div>


  <div class="row comments">
    <div class="alert alert-info" style="display:none" role="alert">A new comment was posted!</div>
    <%= render 'new_comment' %>
    <%= render 'comments' %>
    <%= will_paginate @comments %>
  </div>
  <% if signed_in? && current_user.admin? %>
  <div class="row">
    <button class="btn"><%= link_to 'Edit', edit_product_path(@product) %></button>
    <button class="btn"><%= link_to 'Delete', @product, method: :delete, data: { confirm: 'Are you sure?' } %></button>
    <button class="btn"><%= link_to 'Back', products_path %></button>

  </div>
  <% end %>
</div>
